@page "{id:int}"
@model AirlineBookingApp.Web.Pages.SeatsModel
@{
    ViewData["Title"] = "Seats";
}
<a asp-page="/Flights" class="btn btn-outline-secondary mb-3" title="Back to Flights">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M15 8a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 0 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 7.5H14.5A.5.5 0 0 1 15 8z" />
    </svg>
    Back to Flights
</a>

<div class="container py-5">
    <div class="row justify-content-center mb-4">
        <div class="col-md-10 col-lg-8">
            <div class="card shadow-lg border-0 rounded-4">
                <div class="card-header bg-primary text-white text-center rounded-top-4">
                    <h2 class="mb-0">
                        <i class="bi bi-person-seat me-2"></i>
                        @if (Model.Flight != null)
                        {
                            @:Seats for Flight @Model.Flight.FlightNumber
                        }
                        else
                        {
                            @:Flight Not Found
                        }
                    </h2>
                    @if (Model.Flight != null)
                    {
                        <p class="mb-0 small">
                            <i class="bi bi-geo-alt-fill me-1"></i>
                            @Model.Flight.Source
                            <span class="mx-1">&rarr;</span>
                            @Model.Flight.Destination
                        </p>
                    }
                </div>
                <div class="card-body p-4">
                    @if (Model.Flight == null)
                    {
                        <div class="text-center text-muted py-4">
                            <i class="bi bi-exclamation-circle me-2"></i>Flight not found.
                        </div>
                    }
                    else
                    {
                        <table class="table table-bordered table-striped align-middle mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th>Seat Number</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var seat in Model.Flight.Seats)
                                {
                                    <tr>
                                        <td>
                                            <i class="bi bi-person-seat me-1"></i>@seat.SeatNumber
                                        </td>
                                        <td>
                                            @if (seat.IsBooked)
                                            {
                                                <span class="badge bg-danger">
                                                    <i class="bi bi-x-circle me-1"></i>Booked
                                                </span>
                                            }
                                            else
                                            {
                                                <span class="badge bg-success">
                                                    <i class="bi bi-check-circle me-1"></i>Available
                                                </span>
                                            }
                                        </td>
                                        <td>
                                            @if (!seat.IsBooked)
                                            {
                                                <a asp-page="/Book" asp-route-seatId="@seat.Id" class="btn btn-success btn-sm rounded-pill">
                                                    <i class="bi bi-ticket-perforated me-1"></i>Book
                                                </a>
                                            }
                                            else
                                            {
                                                <span class="text-muted">-</span>
                                            }
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
}